{
  "health": {
    "description": "Health check endpoints don't require any input data"
  },
  "order-delivery": {
    "confirm-delivery": {
      "description": "Confirm order delivery",
      "endpoint": "POST /api/order-delivery/confirm",
      "sample-request": {
        "order_id": "order_123456789",
        "machine_id": "machine_123456789",
        "timestamp": "2024-01-15T10:30:00.000Z",
        "items_delivered": [
          {
            "product_id": "prod_123456789",
            "slot_number": 1,
            "quantity": 2
          },
          {
            "product_id": "prod_987654321",
            "slot_number": 3,
            "quantity": 1
          }
        ]
      }
    },
    "delete-order": {
      "description": "Delete delivered order",
      "endpoint": "DELETE /api/order-delivery/order/{orderId}",
      "sample-path-params": {
        "orderId": "order_123456789"
      }
    },
    "cancel-order": {
      "description": "Cancel active order",
      "endpoint": "POST /api/order-delivery/cancel/{orderId}",
      "sample-path-params": {
        "orderId": "order_123456789"
      }
    }
  },
  "order-validation": {
    "validate-qr": {
      "description": "Validate QR code for pickup",
      "endpoint": "POST /api/order-validation/validate-qr",
      "sample-request": {
        "orderID": "order_123456789",
        "machineID": "machine_123456789",
        "userID": "user_123456789",
        "timestamp": "2024-01-15T10:30:00.000Z",
        "signature": "abc123def456"
      }
    },
    "validate-token": {
      "description": "Validate QR token and return complete order information",
      "endpoint": "POST /api/order-validation/validate-token",
      "sample-request": {
        "qr_code_token": "qr_6565917e-a288-4d69-8693-b55e19ea8ba8_1755260515417"
      },
      "sample-response": {
        "status": "VALID_ORDER",
        "message": "Commande valide et prÃªte pour le retrait",
        "order": {
          "id": "order_123456789",
          "user_id": "user_123456789",
          "machine_id": "machine_123456789",
          "status": "active",
          "created_at": "2024-01-15T10:30:00.000Z",
          "expires_at": "2024-01-15T11:00:00.000Z",
          "qr_code_token": "qr_6565917e-a288-4d69-8693-b55e19ea8ba8_1755260515417",
          "items": [
            {
              "id": "item_123456789",
              "order_id": "order_123456789",
              "product_id": "product_123456789",
              "quantity": 2,
              "slot_number": 1
            }
          ],
          "total_price": 250
        }
      }
    },
    "get-order-status": {
      "description": "Get order status",
      "endpoint": "GET /api/order-validation/order/{orderId}",
      "sample-path-params": {
        "orderId": "order_123456789"
      }
    }
  },
  "card-payment": {
    "process-payment": {
      "description": "Process credit card payment",
      "endpoint": "POST /api/card-payment/process",
      "sample-request": {
        "number": "4242424242424242",
        "exp_month": 12,
        "exp_year": 2025,
        "cvc": "123",
        "country": "FR",
        "amount": 2000,
        "currency": "eur",
        "metadata": {
          "order_id": "order_123456789",
          "user_id": "user_123456789",
          "machine_id": "machine_123456789"
        }
      }
    },
    "test-payment": {
      "description": "Process test payment",
      "endpoint": "POST /api/card-payment/test",
      "note": "Uses Stripe test card data automatically"
    }
  },
  "webhooks": {
    "stripe-webhook": {
      "description": "Handle Stripe webhook events",
      "endpoint": "POST /webhooks/stripe",
      "headers": {
        "stripe-signature": "t=1234567890,v1=abc123def456",
        "Content-Type": "application/json"
      },
      "note": "Requires raw body and stripe-signature header for verification"
    }
  },
  "metrics": {
    "summary": {
      "description": "Get payment metrics summary",
      "endpoint": "GET /metrics/payments"
    },
    "detailed": {
      "description": "Get detailed payment metrics",
      "endpoint": "GET /metrics/payments/detailed"
    },
    "daily": {
      "description": "Get daily payment metrics",
      "endpoint": "GET /metrics/payments/daily"
    },
    "prometheus": {
      "description": "Get Prometheus format metrics",
      "endpoint": "GET /metrics/payments/prometheus"
    },
    "health": {
      "description": "Get metrics health status",
      "endpoint": "GET /metrics/payments/health"
    }
  },
  "stocks": {
    "update-quantity": {
      "description": "Update stock quantity for IoT machines",
      "endpoint": "POST /api/stocks/update-quantity",
      "sample-request": {
        "stockId": "stock_123456789",
        "quantity": 15
      },
      "sample-response": {
        "id": "stock_123456789",
        "machine_id": "machine_123456789",
        "product_id": "product_123456789",
        "quantity": 15,
        "slot_number": 1,
        "max_capacity": 20,
        "low_threshold": 5
      }
    }
  },
  "test-cards": {
    "success": {
      "number": "4242424242424242",
      "exp_month": 12,
      "exp_year": 2025,
      "cvc": "123"
    },
    "decline": {
      "number": "4000000000000002",
      "exp_month": 12,
      "exp_year": 2025,
      "cvc": "123"
    },
    "requires_authentication": {
      "number": "4000002500003155",
      "exp_month": 12,
      "exp_year": 2025,
      "cvc": "123"
    }
  },
  "curl-examples": {
    "health-check": "curl -X GET http://localhost:3000/health",
    "confirm-delivery": "curl -X POST http://localhost:3000/api/order-delivery/confirm -H 'Content-Type: application/json' -d '{\"order_id\": \"order_123456789\"}'",
    "validate-qr": "curl -X POST http://localhost:3000/api/order-validation/validate-qr -H 'Content-Type: application/json' -d '{\"orderID\": \"order_123456789\"}'",
    "validate-token": "curl -X POST http://localhost:3000/api/order-validation/validate-token -H 'Content-Type: application/json' -d '{\"qr_code_token\": \"qr_6565917e-a288-4d69-8693-b55e19ea8ba8_1755260515417\"}'",
    "update-stock": "curl -X POST http://localhost:3000/api/stocks/update-quantity -H 'Content-Type: application/json' -H 'Authorization: Bearer YOUR_JWT_TOKEN' -d '{\"stockId\": \"stock_123456789\", \"quantity\": 15}'",
    "process-payment": "curl -X POST http://localhost:3000/api/card-payment/process -H 'Content-Type: application/json' -d '{\"number\": \"4242424242424242\", \"exp_month\": 12, \"exp_year\": 2025, \"cvc\": \"123\", \"country\": \"FR\", \"amount\": 2000, \"currency\": \"eur\"}'",
    "get-metrics": "curl -X GET http://localhost:3000/metrics/payments"
  }
}
